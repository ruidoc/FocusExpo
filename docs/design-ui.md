## FocusOne RN 跨平台 UI / 设计规范（Design Spec）

> 适用于 iOS 与 Android 的通用设计文档，依据项目现有路由与组件，输出完整页面清单、站点地图、线框结构与出图规范，可直接用于生成高保真设计稿。

### 1. 设计目标与原则
- **最低摩擦**：一键开始、路径最短、信息聚焦。
- **状态清晰**：进行中/暂停/结束/未配置/需授权，均有明显可感提示。
- **可恢复**：冷启动可恢复当前专注态；文案一致、时间准确。
- **一致性**：色板、间距、圆角、字号成体系；轻/暗色一致。

### 2. 设计资产（Design Tokens）
- 颜色（来自 `constants/Colors.ts`）：
  - 主题色：`primary #3478F6`、`primaryLight #F3F8FE`
  - 绿色：`green #34b545`
  - 中性色：`text(light:#11181C / dark:#ECEDEE)`、`background(light:#fff / dark:#151718)`
  - 灰：`gray #C0C4CC`、`desc #B0B8C7`、`border #E5E6EB`
  - Tab 图标：`icon(light:#687076 / dark:#9BA1A6)`
- 字体与字号（iOS 系统字体 San Francisco）：
  - 标题：H1 28/34，H2 22/28，H3 18/24（字号/行高）
  - 正文：Body 17/24，Secondary 15/22，Caption 13/18
  - 字重：Semibold 用于标题与强调，Regular 用于正文
- 间距（dp）：4 / 8 / 12 / 16 / 20 / 24 / 32（页面内优先 12/16/20）
- 圆角：按钮 12，输入与卡片 16，首页功能卡可用 30（与现有样式对齐）
- 阴影：iOS 轻投影，透明度 < 0.15，仅用于悬浮按钮或关键卡片

### 3. 页面清单与站点地图（共 23 页）
- 首启与账户（6）
  - `/(guides)/step1-5`（5 页新手引导）
  - `/login/index` 登录
  - `/login/register` 注册
  - `/login/start` 登录起始
  - `/login/wx` 微信登录
- 主标签（2）
  - `/(tabs)/index` 专注首页
  - `/(tabs)/user` 我的
- 功能（10）
  - 快速开始（模态）：`/quick-start/index`
  - `quick-start/time-slider.tsx`（控件页，作为组件规范）
  - `quick-start/select-apps.tsx`
  - `quick-start/mode-switcher.tsx`
  - 计划：`/plans/index`、`/plans/add`
  - 应用：`/apps/index`、`/apps/add`
  - 其他：`/others/webview`
  - `+not-found`（异常页）
- 设置与用户（5）
  - `/setting/index`、`/setting/permission`、`/setting/feedback`、`/setting/about`、`/setting/logoff`
  - `/user/edit`、`/user/vip`、`/user/coins`

站点地图（Sitemap）：
- 入口：`/index` → 新手引导（未登录）或 Tabs（已登录）
- Tabs：Focus（首页） ↔ Mine（我的）
- 从首页进入：Quick Start（模态）、任务面板、应用管理、权限设置

### 4. 关键页面线框（用于直接出图）

#### 4.1 专注首页 `/(tabs)/index`
- 场景目标：集中呈现核心入口与当前专注状态。
- 模块构成：
  1) 顶部 Banner（可选）：专注进行中/暂停状态提示（色块 + 图标）
  2) 快速开始卡（主 CTA）：
     - 主按钮文案：“开始专注” / “继续专注”（暂停态）
     - 次信息：最近一次时长或推荐档（25/45/90）
  3) 目标预览：已选目标 App 图标列表（`TokenLabel`），展示数量 + 进入管理
  4) 任务/计划入口：进入 `任务面板`（`/plans/index`）与 `添加任务`
  5) 辅助入口：`应用管理`、`权限设置`
- 空态：未选目标 → 展示引导卡“添加专注目标”；未创建计划 → “创建你的第一个周期计划”。
- 交互：主 CTA 点按 → `/quick-start/index`；计划入口 → `/plans/index`。

#### 4.2 快速开始（模态） `/quick-start/index`
- 目标：以最少步骤完成一次性专注启动。
- 结构：
  - Header：标题“快速开始”，关闭按钮
  - Section A 时长：预设档（5/15/25/45/90）+ 滑杆（自定义）
  - Section B 目标：已选目标列表（头像式图标），“管理目标”入口
  - 底部：主按钮“开始专注”（primary）、次按钮“去任务面板”（次要）
- 状态：
  - 未授权：按钮置灰 + 提示“请开启屏幕使用时间权限以开始专注” → 一键前往权限页
  - 未选择目标：按钮置灰 + 提示“请先选择专注目标”
  - 进行中（从首页进入暂停恢复）：主按钮改为“继续专注”
- 文案：
  - 开始成功 Toast：“专注开始”
  - 结束通知：见 4.8 通知

#### 4.3 计划列表 `/plans/index`
- 结构：
  - 顶部：标题“任务面板”，右上角“添加”
  - 列表：卡片项（计划名、周几点亮、起止时间、启用状态）
  - 交互：点击项 → 编辑；滑动二级操作（启用/停用/删除）
- 空态：插画 + 文案“创建你的第一个周期计划” + CTA “新建计划”

#### 4.4 新建/编辑计划 `/plans/add`
- 表单：
  - 计划名称（可选）
  - 周几选择（七日按钮）
  - 起止时间（滚轮或时间选择器）
  - 目标预览（已选 App 图标）与“管理目标”入口
  - 底部主按钮“保存”
- 校验：结束时间需晚于开始时间；跨日的表现为“当日结束/次日再开始”的提示说明。

#### 4.5 设置-权限 `/setting/permission`
- 模块：
  - 屏幕使用时间：状态（已开启/未开启）+ 一键引导
  - 通知权限：状态（已允许/未允许）+ 引导
  - 说明区：为何需要这些权限、对功能影响
- 空态：都未授权时，突出引导卡 + 扫清阻塞文案

#### 4.6 我的 `/(tabs)/user`
- 模块：
  - 用户信息头（头像、昵称）+ “编辑资料”
  - 入口：会员中心、金币中心、设置
- 子页：`/user/edit`（资料）、`/user/vip`（会员占位）、`/user/coins`（金币占位）

#### 4.7 登录与注册 `/login/*`
- 登录：手机号/邮箱 + 密码，或“微信登录”（如需要）
- 注册：最小字段集 + 同意协议
- 登录起始：展示价值点与进入方式

#### 4.8 拦截页（ShieldExtension UI）
- 文案固定（来自 PRD）：
  - 标题：“已被屏蔽”
  - 副文案：“总时长 X 分钟，HH:mm 结束”
- 视觉：沉静背景 + 强对比标题；隐藏多余操作，仅保留“返回”或“关闭”引导

#### 4.9 通知文案（本地）
- 开始专注：标题“专注开始”，副文案“已为你屏蔽干扰应用”
- 结束专注：标题“专注结束”，副文案“共坚持 X 分钟，已解除屏蔽”
- 暂停提醒：标题“已暂停”，副文案“将于 X 分钟后自动恢复”

### 5. 组件规范（与现有组件库对齐）
- 卡片 `components/cus-card`：
  - 16 圆角、卡片白 `#fff`、边框 `#E5E6EB`，内边距 16-20
- 按钮 `components/cus-button`：
  - Primary 使用 `primary`，文字白；Disabled 使用 `gray`/`desc`
- 分割线 `components/cus-divider`：
  - 细线 `#E5E6EB`，上下间距 12
- 页面容器 `components/cus-page`：
  - SafeArea、统一背景、列表间距规范
- TokenLabel `components/native/TokenLabel`：
  - 图标尺寸 40/60；列表场景保持 8-12 间距
- 首页模块：
  - `home/focus-button`（主 CTA）
  - `home/focus-notice`（状态提示 Banner）
  - `home/manage-entry`（计划/应用快捷入口）

### 6. 状态与可视化
- 进行中：顶部 Banner 使用 `primary` 或浅色底 + 图标；倒计时可选
- 暂停：Banner 使用灰色系，突出“将于 X 分钟后自动恢复”
- 已结束：首页展示空态或最近一次记录概览（可选）
- 未配置：展示引导卡（添加目标/创建计划）
- 未授权：按钮禁用 + 明确原因提示 + 去权限页 CTA

### 7. 交互与反馈
- 所有主按钮命中区域 ≥ 44dp；滑动手势提供可逆操作（撤销删除）
- 弹窗/Toast：用于轻量反馈；关键路径使用页内提示卡
- 模态关闭：点击 X 或滑动下拉关闭（保留选择）

### 8. 可访问性（A11y）
- 动态字体：正文与按钮支持系统字体放大
- 对比度：主按钮与文字对比度 ≥ 4.5:1
- 无障碍标签：关键按钮与图标提供可读 label

### 9. 原型出图要点（Figma 建议）
- 桌面：iPhone 15 Pro 画板，单主题优先（亮色），提供暗色对照 1-2 张
- 组件库页：按钮/卡片/分割线/TokenLabel/时间选择控件/周几选择器
- 页面流：
  1) 新手引导 → 登录 → 专注首页
  2) 专注首页 → 快速开始（模态） → 通知 → 拦截页（示意）
  3) 专注首页 → 任务面板 → 新建计划 → 返回
  4) 设置权限流程（两卡）

### 10. 页面验收清单（按页）
- 专注首页：
  - 主 CTA、目标预览、任务入口、权限与空态提示完整
  - 进行中/暂停 Banner 样式与文案正确
- 快速开始（模态）：
  - 预设档、滑杆、目标区、按钮态（禁用/启用）、错误提示
- 计划列表/新增：
  - 周几点亮规则、时间选择、空态、启停与删除交互
- 设置-权限：
  - 两权限状态显示准确，指引路径可达
- 拦截页/通知：
  - 文案与时间格式与 PRD 一致（“总时长 X 分钟，HH:mm 结束”）

---
本设计文档用于直接驱动 UI 产出与联调；如 PRD/TDD 更新，请同步修订本文件。

