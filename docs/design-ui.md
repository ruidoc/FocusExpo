## FocusOne UI 设计规范（Design Spec）

> 基于 iOS PRD 的完整页面规划，三底部Tab架构，覆盖专注、挑战、钱包、段位等核心功能。

### 1. 设计原则

- **最低摩擦**：一键开始、路径最短、信息聚焦
- **状态清晰**：专注中/暂停/段位/余额状态明确可见
- **可恢复**：冷启动恢复当前专注状态
- **一致性**：色板、间距、圆角、字号成体系

### 2. 设计资产（Design Tokens）

- **颜色**：
  - 主题色：`primary #3478F6`、`primaryLight #F3F8FE`
  - 绿色：`green #34b545`
  - 中性色：`text(light:#11181C / dark:#ECEDEE)`、`background(light:#fff / dark:#151718)`
  - 灰：`gray #C0C4CC`、`desc #B0B8C7`、`border #E5E6EB`
- **字体**：iOS 系统字体 San Francisco
  - 标题：H1 28/34，H2 22/28，H3 18/24
  - 正文：Body 17/24，Secondary 15/22，Caption 13/18
- **间距**：4/8/12/16/20/24/32（页面内优先12/16/20）
- **圆角**：按钮12，卡片16，功能卡30
- **图标**：统一从网站 https://ionic.io/ionicons 中获取

### 3. 完整页面清单（共25页）

#### 3.1 引导与登录（4页）
- `/(guides)/step1-5` - 新手引导（5步合并为1页）
- `/login/start` - 登录起始页
- `/login/index` - 登录页
- `/login/register` - 注册页

#### 3.2 主要Tab（3页）
- `/(tabs)/index` - **首页**（专注中心）
- `/(tabs)/challenges` - **挑战页**（挑战列表）
- `/(tabs)/user` - **我的页**（个人中心）

#### 3.3 专注功能（6页）
- `/quick-start/index` - 快速开始（模态）
- `/quick-start/betting` - 下注选择（模态子页）
- `/plans/index` - 计划列表
- `/plans/add` - 新建/编辑计划
- `/apps/index` - 应用管理
- `/apps/add` - 添加应用

#### 3.4 挑战系统（3页）
- `/challenges/detail` - 挑战详情
- `/challenges/history` - 挑战历史
- `/challenges/progress` - 进行中挑战

#### 3.5 钱包与段位（4页）
- `/user/coins` - 钱包中心
- `/user/coins/recharge` - 充值页
- `/user/coins/history` - 交易明细
- `/user/rank` - 段位说明

#### 3.6 设置与其他（5页）
- `/setting/index` - 设置首页
- `/setting/permission` - 权限设置
- `/setting/about` - 关于我们
- `/user/edit` - 编辑资料
- `+not-found` - 404页面

### 4. 页面功能详细说明

#### 4.1 首页 `/(tabs)/index`
**功能目标**：专注启动中心，状态展示与快捷操作

**核心模块**：
1. **状态Banner**（条件显示）
   - 专注进行中：倒计时 + 暂停按钮
   - 已暂停：恢复倒计时 + 继续按钮
   
2. **段位与上限条**
   - 左侧：段位徽章（L0试飞员 → L5星云指挥）
   - 右侧：当前上限（X Apps / Y分钟）+ 进度提示
   - 点击：跳转段位说明页
   
3. **快速开始卡**
   - 主按钮："开始专注" / "继续专注"
   - 推荐时长：25/45/90分钟
   - 点击：打开快速开始模态
   
4. **目标预览区**
   - 已选App图标列表（最多显示6个）
   - "管理目标"按钮 → `/apps/index`
   
5. **功能入口区**
   - 计划管理 → `/plans/index`
   - 钱包余额 → `/user/coins`
   
**空状态处理**：
- 未选目标：显示"添加专注目标"引导卡
- 未创建计划：显示"创建周期计划"引导卡

#### 4.2 挑战页 `/(tabs)/challenges`
**功能目标**：挑战任务中心，驱动用户成长

**核心模块**：
1. **筛选栏**
   - 类型筛选：全部/永久奖励/临时奖励
   - 难度筛选：全部/10币/20币/50币
   
2. **挑战卡片列表**
   - 标题 + 难度标签
   - 必屏蔽App图标组
   - 目标条件（如：工作日完成3次≥30分钟）
   - 入场消耗 + 奖励说明
   - 进度条（已领取的挑战）
   - 操作按钮：查看详情/领取挑战
   
3. **底部Tab**
   - 可领取 / 进行中 / 历史记录
   
**关键交互**：
- 领取挑战：余额校验 + 二次确认
- 查看详情：跳转 `/challenges/detail`
- 历史记录：跳转 `/challenges/history`

#### 4.3 我的页 `/(tabs)/user`
**功能目标**：个人信息与设置入口

**核心模块**：
1. **用户信息头**
   - 头像 + 昵称
   - 编辑按钮 → `/user/edit`
   
2. **功能入口**
   - 钱包中心 → `/user/coins`（显示余额）
   - 段位成就 → `/user/rank`（显示当前段位）
   - 设置 → `/setting/index`
   
3. **统计概览**（可选）
   - 本周专注时长
   - 完成率
   - 连续天数

#### 4.4 快速开始模态 `/quick-start/index`
**功能目标**：最少步骤启动专注

**核心模块**：
1. **时长选择**
   - 预设档：5/15/25/45/90分钟
   - 自定义滑杆
   
2. **目标确认**
   - 已选App图标列表
   - "管理目标"快捷入口
   
3. **下注选择**
   - 下注金额：5/10/20/50/自定义
   - 潜在奖励计算显示
   - 余额校验
   
4. **开始按钮**
   - 正常："开始专注"
   - 余额不足："去充值"
   - 未授权："去设置权限"

#### 4.5 挑战详情 `/challenges/detail`
**功能目标**：挑战规则说明与领取

**核心模块**：
1. **挑战信息**
   - 标题 + 难度标签
   - 必屏蔽App列表
   - 详细规则说明
   - 有效期倒计时
   
2. **奖励说明**
   - 永久奖励：+1 App或+15分钟
   - 临时奖励：7天内+2 Apps或+30分钟
   
3. **进度跟踪**（已领取后显示）
   - 完成进度条
   - 剩余时间
   - 当前状态
   
4. **操作区**
   - 未领取：领取按钮（扣币确认）
   - 进行中：放弃按钮（仅未开始时）
   - 已完成：查看奖励

#### 4.6 钱包中心 `/user/coins`
**功能目标**：自律币管理与充值

**核心模块**：
1. **余额显示**
   - 当前余额（大字号）
   - 今日收支概览
   
2. **快捷操作**
   - 充值按钮 → `/user/coins/recharge`
   - 交易明细 → `/user/coins/history`
   
3. **收支概览**
   - 本周收入/支出统计
   - 主要来源/用途

#### 4.7 段位说明 `/user/rank`
**功能目标**：段位规则与进度展示

**核心模块**：
1. **当前段位**
   - 段位徽章 + 名称
   - 当前上限（Apps/分钟）
   
2. **升级进度**
   - 近7天统计：M7分钟数 + SR7成功率
   - 距下一段位差距
   - 进度条显示
   
3. **段位规则**
   - L0-L5完整阶梯
   - 每级解锁条件
   - 奖励说明

#### 4.8 计划列表 `/plans/index`
**功能目标**：周期计划管理

**核心模块**：
1. **计划卡片列表**
   - 计划名称
   - 周几点亮显示
   - 起止时间
   - 启用开关
   
2. **操作**
   - 点击编辑
   - 滑动删除
   - 新建按钮

#### 4.9 应用管理 `/apps/index`
**功能目标**：专注目标管理

**核心模块**：
1. **已选应用列表**
   - App图标 + 名称
   - 删除按钮
   
2. **添加入口**
   - 系统选择器调用
   - 当前上限提示

#### 4.10 权限设置 `/setting/permission`
**功能目标**：必要权限引导

**核心模块**：
1. **权限状态**
   - 屏幕使用时间：已开启/未开启
   - 通知权限：已允许/未允许
   
2. **引导操作**
   - 一键跳转系统设置
   - 权限说明文案

### 5. 关键交互流程

#### 5.1 专注流程
1. 首页 → 快速开始模态
2. 选择时长 → 选择下注 → 开始专注
3. 专注中：首页显示倒计时 + 暂停按钮
4. 结束：通知 + 结算页面

#### 5.2 挑战流程
1. 挑战页 → 挑战详情
2. 领取挑战（扣币）→ 进行中状态
3. 完成专注任务 → 自动结算
4. 奖励到账 → 上限更新

#### 5.3 段位晋升流程
1. 自动计算M7/SR7
2. 达到阈值 → 晋升动画
3. 上限更新 → 首页刷新

### 6. 状态管理

#### 6.1 专注状态
- 未开始：显示开始按钮
- 进行中：显示倒计时 + 暂停按钮
- 已暂停：显示恢复倒计时 + 继续按钮
- 已结束：显示结果 + 再次开始

#### 6.2 挑战状态
- 可领取：显示领取按钮
- 进行中：显示进度 + 剩余时间
- 已完成：显示奖励结果
- 已失败：显示失败原因

#### 6.3 段位状态
- 正常：显示进度条
- 冻结：显示冻结提示（SR7过低）
- 晋升：显示晋升动画

### 7. 验收标准

#### 7.1 首页验收
- [ ] 段位徽章与上限显示正确
- [ ] 专注状态准确反映
- [ ] 钱包余额实时更新
- [ ] 空状态引导完整

#### 7.2 挑战验收
- [ ] 挑战列表加载正常
- [ ] 领取流程完整（扣币→进度→结算）
- [ ] 必屏蔽App生效
- [ ] 奖励正确到账

#### 7.3 钱包验收
- [ ] 余额显示准确
- [ ] 充值流程完整
- [ ] 交易记录完整
- [ ] 扣费/奖励及时反映

#### 7.4 段位验收
- [ ] M7/SR7计算正确
- [ ] 晋升条件准确
- [ ] 上限更新及时
- [ ] 冻结逻辑正确

---

**总结**：本设计覆盖PRD中所有功能，通过25个页面实现专注、挑战、钱包、段位的完整体验，确保用户路径最短、状态清晰、交互流畅。