## FocusOne iOS 产品需求文档（PRD）

> 仅针对 iOS（iOS 16+）。本文件面向产品与设计，不涉及实现细节。

### 一、产品目标与价值
- **目标**：帮助用户以最低摩擦快速进入专注状态，并通过计划化与适度管控维持专注。
- **核心价值**：
  - 一键开始：极简操作完成“选择目标 + 选择时长 + 开始”。
  - 周期养成：按周几与时段自动进入专注，降低自控成本。
  - 可控例外：在必要时允许短暂暂停，降低放弃率。
  - 行为承诺：引入“打赌 + 自律币”机制，将专注行为与承诺绑定，提供即时反馈与奖励，提升开始与坚持的动力。

### 二、用户与场景
- **目标用户**：学生、独立创作者、工程师/设计师、自由职业者。
- **典型场景**：
  - 学习/备考：晚间 22:00-23:30 固定自习。
  - 深度工作：25-90 分钟冲刺专注。
  - 会议/演讲：临时屏蔽社交与消息干扰。

### 三、范围（MVP）
- 一次性专注（Quick Start）
  - 选择目标 App/网站/类别
  - 选择时长（预设 5/15/25/45/90/自定义）
  - 开始专注并展示倒计时
- 周期计划
  - 设置周几 + 起止时间
  - 到点自动开始与结束
- 暂停与恢复
  - 专注中可选择短暂暂停
  - 暂停后，可点击恢复
- 拦截页（Shield）
  - 展示“已被屏蔽”，提示总时长与结束时间
- 通知与状态
  - 开始/结束通知
  - App 重启后能恢复当前专注状态展示
- 自律币与打赌（MVP）
  - 注册赠送自律币（用于冷启动体验）
  - 开始一次性专注或周期计划时需下注自律币；成功结束返还赌注并给予额外奖励，失败扣除赌注并记录失败
  - 3 分钟内的暂停不判负，但需消耗少量自律币；取消任务视为失败
  - 充值入口（内购）与余额/明细查看
- 自动解锁与段位（星航段位）
  - 初始上限：最多 2 个 App、最长 45 分钟
  - 基于近 7 天（M7 / SR7）的自动解锁阶梯：
    - L0「试飞员」：2 Apps / 45 分钟（默认）
    - L1「观星者」：M7≥120 且 SR7≥60% → 5 Apps / 60 分钟
    - L2「逐月者」：M7≥240 且 SR7≥65% → 7 Apps / 75 分钟
    - L3「行星行者」：M7≥420 且 SR7≥70% → 9 Apps / 105 分钟
    - L4「恒星领航」：M7≥600 且 SR7≥75% → 12 Apps / 150 分钟
    - L5「星云指挥」：M7≥900 且 SR7≥80% → 15 Apps / 180 分钟
  - 永久解锁不降级；若 SR7 连续 14 天 <50%，仅冻结升级
- 挑战板块（平台派发）
  - 平台统一添加挑战任务，对所有用户可见
  - 用户在挑战大厅中可以选择任务挑战，立即开始
  - 挑战成本：立即消耗xx个自律币
  - 挑战奖励：增加可专注时长 or 增加可屏蔽app数量
  - 结算：成功则发放奖励，失败则挑战失败，只损失消耗的自律币

### 四、核心流程（不含技术细节）
1) 一次性专注：选择目标 → 选择时长 → 开始 → 首页倒计时 → 结束通知
2) 周期计划：选择目标 → 选择时间段 → 到点自动开始 → 首页倒计时 → 到点自动结束 → 结束通知
3) 暂停：专注中 → 点击暂停 → 首页显示暂停 → 首页点击恢复 → 继续专注
4) 打开被屏蔽 App：展示拦截页 → 引导返回或继续专注

### 五、主要功能清单（可见即验收）
- 目标选择：新增/删除已选目标，显示数量与图标预览
- 快速开始：时长选择、开始按钮、倒计时显示
- 计划管理：列表查看、创建/编辑/删除、命名与生效提示
- 专注中：剩余时间、暂停入口、结束方式（如有）
- 拦截页：文案与结束时间提示、一键返回
- 通知：开始/结束提示
- 设置：权限引导、关于我们、意见反馈
- 自律币与打赌：
  - 钱包页：展示余额、充值入口（IAP）、收支明细
  - 开始专注时的下注选择（固定档或自定义，含余额校验）
  - 结果结算：成功返还 + 奖励入账；失败扣除；暂停扣费
  - 新手赠币到账与提示
- 自动解锁与段位：
  - 首页常驻显示当前段位徽章、当前上限与“距下一阶还差 X 分钟 / 成功率 Y%”
  - 达成阈值后即时弹出晋升动画与奖励提示（如少量自律币）
- 挑战交互：
  - 领取时明确入场消耗与奖励形式；余额不足给出充值入口
  - 进行中展示进度条与剩余时间；失败给出原因与下次建议
  - 奖励为永久上限时，立即反映到上限与段位进度（不降级）
- 挑战：
  - 列表页：查看可领取挑战、规则与奖励；领取与入场扣币
  - 详情页：显示必须屏蔽的 App、目标条件、进度、奖励形式
  - 结算页：成功发放永久/临时奖励并更新上限；失败记录与复盘

### 六、交互要求（关键）
- 首次使用：引导完成权限与目标选择（可跳过，但影响专注启动需给出提示）
- 空状态：未选择目标/未创建计划时展示引导卡片
- 错误提示：未登录/未授权/未选择目标时，按钮禁用或明确 Toast
- 时长选择：优先预设档，支持自定义
- 暂停设计：提供 1/3/5/10 分钟等选项，显示倒计时与恢复提示
- 可恢复性：App 冷启动后，当前专注状态应被正确恢复展示
- 打赌流程：
  - 开始前弹层：选择下注金额，展示潜在奖励与失败扣除说明；余额不足时提供“去充值”与“去赚币”入口
  - 暂停确认：弹出“本次暂停将消耗 X 自律币（3 分钟内不判负）”提示；显示剩余可暂停次数（如有上限）
  - 取消确认：明确“将判定本次专注失败并扣除赌注”，需二次确认
  - 结束页：展示结果、奖励或扣除明细、失败原因、再次开局与复盘入口
- 冷启动礼包：注册成功后，顶部气泡或卡片提示“赠送自律币已到账”，引导首次开局

### 七、文案与提示（示例）
- 开始专注：标题“专注开始”，副文案“已为你屏蔽干扰应用”
- 结束专注：标题“专注结束”，副文案“共坚持 X 分钟，已解除屏蔽”
- 拦截页：标题“已被屏蔽”，副文案“总时长 X 分钟，HH:mm 结束”
- 暂停提醒：标题“已暂停”，副文案“将于 X 分钟后自动恢复”
- 权限缺失：提示“请开启屏幕使用时间权限以开始专注”
- 打赌开始：标题“下注成功”，副文案“坚持到结束可返还 Y 并额外获得 +Z”
- 打赌失败：标题“本次打赌失败”，副文案“已扣除 Y，自律下一次”
- 余额不足：标题“余额不足”，副文案“去充值或做任务赚取自律币”
- 暂停扣费：标题“已消耗 X 自律币”，副文案“3 分钟内不判负，注意时间”
- 新手赠币：标题“赠送自律币已到账”，副文案“立即开一局试试吧”
- 段位晋升：标题“星航晋升至「{段位名}」”，副文案“上限提升至 {Apps}/{分钟}，继续加油！”
- 自动解锁进度：标题“距下一阶还差 {X} 分钟”，副文案“近 7 天成功率 {Y}%”
- 挑战领取：标题“挑战已领取”，副文案“完成即可获得 {奖励}”
- 挑战成功：标题“挑战完成！”，副文案“奖励 {奖励} 已到账”
- 挑战失败：标题“挑战未达标”，副文案“已扣除入场 {X} 币，复盘一下再来”

### 八、验收标准（MVP）
- 能完成一次性专注的完整链路：选择 → 开始 → 倒计时 → 结束通知
- 周期计划能按设定到点自动开始与结束（包含通知）
- 专注中可暂停并在时间到自动恢复
- 打开被拦截目标时出现拦截页，文案与结束时间展示正确
- App 重启后仍能正确展示当前专注状态
- 自律币与打赌：
  - 注册后赠币按设定值到账，并在钱包与明细可见
  - 开始专注时若余额不足，无法下注并出现引导；余额充足可完成下注
  - 成功结束：返还下注金额并按比例或固定值发放奖励，余额与明细一致
  - 取消/违规：判负并扣除下注金额，失败记录可见
  - 暂停（≤3 分钟）：不判负，但按设定扣除自律币；超过规则则按失败处理
- 自动解锁与段位：
  - 近 7 天统计（M7、SR7）正确计算；达阈值后自动提升上限并展示晋升
  - 晋升后不降级，SR7 连续 14 天 <50% 时仅冻结升级
- 挑战：
  - 可领取、进行中、结算全链路可用，入场扣币与奖励发放准确
  - 必须屏蔽 App 生效；永久/临时奖励对上限与展示即时生效

### 九、边界说明
- 最小时长限制：当选择极短时长时，前端仍以用户选择为主进行展示与提示
- 屏蔽边界：系统限制导致的个别应用/域名不可屏蔽，需在文案说明
- 跨日说明：夜间计划跨日的表现以“到点结束/次日再开始”为准（后续优化）
- 非博彩说明：结果完全由用户行为决定，无任何概率或随机因素，不可兑现法币；自律币仅限应用内使用
- 充值合规：采用 App 内购（IAP）售卖自律币（消耗型），价格与换算在设置与充值页明确展示
- 防滥用：每日暂停扣费次数与单次上限可配置；失败记录用于复盘，不鼓励过度开局
- 离线/异常：网络异常时结算以本地状态与系统时间为准，待恢复后与服务器对账；异常不重复扣费

### 十、指标（MVP）
- 新手完成率：首次进入 48 小时内成功开启一次专注的比例 ≥ 60%
- 专注完成率：开始后坚持到结束的比例 ≥ 70%
- 周期计划使用率：创建至少 1 条周期计划的用户占活跃用户 ≥ 25%
- 次日留存提升：注册赠币与打赌机制带来的 D1 留存提升 ≥ +5pp（对照组）
- 变现基础：充值转化率 ≥ 1%，ARPPU 与币收支比例监控（Source/Sink 比例 0.8~1.2）

### 十一、里程碑
- M1：一次性专注、周期计划、暂停/恢复、拦截页、通知与状态恢复；基础自律币钱包、注册赠币、下注/结算与明细
- M2：跨日体验优化、进度与结果展示优化、基础统计页（可选）；自动解锁与段位、挑战板块（平台派发）
- M3：会员/内购策略与文案、成长任务与运营活动（若进入 V1）

### 十二、经济系统与规则（新增）
- 自律币（虚拟代币）：
  - 获取：注册赠送、完成任务、内购充值
  - 消耗：开始打赌下注、暂停扣费、解锁挑战（可选，见“参数与TBD”）
- 打赌规则：
  - 下注：开始一次性专注或周期计划前需选择下注金额（预设档或自定义），需余额充足
  - 结算：
    - 成功：返还下注金额，并发放奖励（固定值或与时长/难度相关的倍率，具体见“参数与TBD”）
    - 失败（取消/违规）：扣除下注金额并记录失败
    - 暂停（≤3 分钟）：不判负，但扣除固定费用；超时或次数超限按失败处理
- 初始限制与解锁：
  - 冷启动限制：最多可选择 3 个目标、最长专注时长 45 分钟
  - 自动解锁：基于近 7 天合格专注分钟数（M7）与成功率（SR7）提升上限，不消耗自律币；达成后永久生效，不降级
  - 挑战板块：平台派发挑战，入场消耗自律币；奖励可为永久 +1 App / +15 分钟（每周限 1 次）或 7 天临时 +2 Apps / +30 分钟

### 十三、参数与TBD（实现前需明确）
- 注册赠币数量：默认建议 100（可 A/B）
- 下注档位：如 5/10/20/50/自定义（最小值与步进）
- 奖励机制：
  - 固定奖励 Z，或按下注金额与时长的倍率 r（如奖励 = min(上限, 下注×r×时长系数)）
- 暂停扣费：每次 X 自律币；每日最多 Y 次（或按时长阶梯计费）
- 初始限制：N（目标数量上限）、XX（最长时长）
- 解锁逻辑（采用“自动解锁 + 挑战加速”，不使用挑战点）：
  - 自动解锁：按 L0-L5 阶梯阈值执行（M7/SR7），永久生效不降级；SR7 过低时冻结升级
  - 挑战：
    - 配置字段：必屏蔽 App 列表、目标条件（次数/时段/时长）、入场消耗（10/20/50）、奖励类型（永久 +1 App/+15 分或临时 +2 Apps/+30 分）
    - 频率与上限：每周发布 3-5 个，最多领取 2 个；永久奖励每周最多获得 1 次
    - 80% 进度返还 50% 币开关：默认关闭，用于 A/B
- 失败定义：取消、超出允许的暂停规则、系统判定的违规（如尝试绕过屏蔽）
- 数据面板：需埋点的关键事件与字段（下注、结算、暂停、失败原因、解锁）
- 默认参数：
  - 初始护栏：最多 3 个 App、最长 45 分钟
  - 合格门槛：单次 ≥25 分钟；每日计入 ≤2 次，间隔 ≥120 分钟
  - 段位命名与上限：
    - L0 试飞员：3 Apps / 45 分钟
    - L1 观星者：5 Apps / 60 分钟（M7≥120 且 SR7≥60%）
    - L2 逐月者：7 Apps / 75 分钟（M7≥240 且 SR7≥65%）
    - L3 行星行者：9 Apps / 105 分钟（M7≥420 且 SR7≥70%）
    - L4 恒星领航：12 Apps / 150 分钟（M7≥600 且 SR7≥75%）
    - L5 星云指挥：15 Apps / 180 分钟（M7≥900 且 SR7≥80%）
---

本 PRD 面向产品与设计，未包含实现手段；如需落地支持，我会另行输出技术对齐文档（TDD）。