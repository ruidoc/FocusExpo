# FocusOne iOS 产品需求文档（PRD）v2.0

> 仅针对 iOS（iOS 16+）。本文件面向产品与设计，不涉及实现细节。按页面维度组织功能需求。

## 📋 产品概览

### 🎯 产品目标与价值

- **目标**：帮助用户以最低摩擦快速进入专注状态，并通过计划化与适度管控维持专注。
- **核心价值**：
  - 一键开始：极简操作完成"选择目标 + 选择时长 + 开始"。
  - 周期养成：按周几与时段自动进入专注，降低自控成本。
  - 可控例外：在必要时允许短暂暂停，降低放弃率。
  - 行为承诺：引入"打赌 + 自律币"机制，将专注行为与承诺绑定，提供即时反馈与奖励，提升开始与坚持的动力。

### 👥 用户与场景

- **目标用户**：学生、独立创作者、工程师/设计师、自由职业者。
- **典型场景**：
  - 学习/备考：晚间 22:00-23:30 固定自习。
  - 深度工作：25-90 分钟冲刺专注。
  - 会议/演讲：临时屏蔽社交与消息干扰。

---

## 📱 应用架构与导航

### 🔗 底部 Tab 导航

应用采用三个主要 Tab 页面的导航结构：

| Tab | 名称 | 图标 | 主要功能                         |
| --- | ---- | ---- | -------------------------------- |
| 1️⃣  | 首页 | 🏠   | 专注控制中心、快速开始、计划管理 |
| 2️⃣  | 挑战 | 🎯   | 挑战大厅、我的挑战、挑战记录     |
| 3️⃣  | 我的 | 👤   | 个人信息、段位系统、钱包、设置   |

**导航交互：**

- 底部固定 Tab 栏，支持点击切换
- 当前激活 Tab 高亮显示
- 每个 Tab 保持独立的页面状态
- 支持 Tab 间的快速切换

---

## 📱 页面功能设计

### 1. 🏠 首页 (Home)

#### 核心功能

- 快速开始专注入口
- 当前专注状态展示
- 专注控制操作

#### 页面内容

**空闲状态：**

- 快速开始按钮：一键进入专注流程
- 计划入口：查看和管理周期计划
- 今日专注摘要：显示今日已完成的专注次数和时长

**专注进行中：**

- 倒计时显示：剩余时间大字展示
- 专注信息：当前屏蔽的目标和总时长
- 暂停按钮：允许短暂暂停
- 结束按钮：提前结束专注（需确认）

**暂停状态：**

- 暂停倒计时：暂停剩余时间
- 恢复按钮：立即恢复专注
- 暂停提示：消耗自律币说明

**计划待开始：**

- 下次计划时间：显示即将开始的计划
- 手动开始：提前开始计划
- 编辑计划：修改计划设置

#### 交互要求

- 首次使用引导完成权限与目标选择（可跳过，但影响专注启动需给出提示）
- 空状态时展示引导卡片
- App 冷启动后，当前专注状态应被正确恢复展示

---

### 2. ⚡ 快速开始页面 (Quick Start)

#### 核心功能

- 目标选择与管理
- 时长选择
- 下注设置
- 开始专注

#### 页面内容

**目标选择区域：**

- 已选目标列表：显示图标、名称、删除按钮
- 添加目标按钮：支持 App/网站/类别选择
- 数量限制提示：当前可选择最多 X 个 App
- 预览区域：显示选中目标的图标

**时长选择区域：**

- 预设时长：5/15/25/45/90 分钟快选按钮
- 自定义时长：滑块或输入框设置
- 时长限制提示：当前最长可专注 X 分钟

**下注设置区域：**

- 余额显示：当前自律币余额
- 下注选择：固定档位（5/10/20/50）或自定义金额
- 最小下注规则：基于选择时长计算最小下注值（每 30 分钟+1 个自律币）
- 潜在奖励：展示成功后可获得的奖励
- 风险提示：失败将扣除的金额说明

**开始按钮：**

- 状态检查：目标、时长、下注、余额校验
- 错误提示：未满足条件时按钮禁用并给出明确提示
- 确认弹层：最终确认专注设置和下注金额

#### 交互要求

- 目标选择支持新增/删除，实时显示数量与图标预览
- 时长选择优先预设档，支持自定义
- 下注时展示潜在奖励与失败扣除说明
- 时长变化时自动更新最小下注值提示，当前下注低于最小值时自动调整
- 余额不足时提供"去充值"与"去赚币"入口

---

### 3. 📅 计划管理页面 (Plans)

#### 核心功能

- 周期计划列表展示
- 创建新计划
- 编辑现有计划
- 计划开关控制

#### 页面内容

**计划列表：**

- 计划卡片：显示计划名称、时间段、重复规则
- 开关按钮：启用/禁用计划
- 下次执行时间：显示计划下次生效时间
- 编辑入口：点击进入编辑页面
- 删除功能：长按或滑动删除

**创建计划按钮：**

- 新增入口：底部固定或右上角添加按钮

**空状态：**

- 引导卡片：提示创建第一个计划
- 示例说明：展示计划的价值和使用场景

#### 计划编辑页面内容

**基本信息：**

- 计划名称：自定义计划名称输入
- 目标选择：选择要屏蔽的 App/类别（当前最多可选择 X 个 App）
- 时长设置：设置专注时长（当前最长可专注 X 分钟）

**时间设置：**

- 重复规则：选择周几重复
- 开始时间：设置自动开始时间
- 结束时间：设置自动结束时间

**下注设置：**

- 下注金额：设置每次自动开始的下注金额
- 自动扣费确认：明确说明自动扣费规则

#### 交互要求

- 列表查看、创建/编辑/删除功能完整
- 计划命名与生效提示清晰
- 到点自动开始与结束（包含通知）

---

### 4. 🛡️ 拦截页面 (Shield)

#### 核心功能

- 屏蔽提示展示
- 专注信息显示
- 返回引导

#### 页面内容

**主要信息：**

- 标题：已被屏蔽
- 总时长信息：本次专注的总时长
- 结束时间：预计结束的具体时间

**操作按钮：**

- 返回：关闭 APP 返回桌面
- 查看详情：查看当前专注的详细信息（可选）

**视觉设计：**

- 简洁明了的屏蔽提示界面
- 突出显示结束时间
- 引导用户返回而非强行使用

#### 交互要求

- 文案与结束时间提示准确
- 一键返回功能可用
- 界面简洁，避免提供绕过屏蔽的方式

---

### 5. 💰 自律币钱包页面 (Wallet)

> 从"我的"页面点击钱包入口进入

#### 核心功能

- 余额展示
- 收支明细
- 充值功能
- 赚币入口

#### 页面内容

**余额区域：**

- 当前余额：大字显示自律币数量
- 余额变化：显示今日或近期变化
- 充值按钮：进入内购充值页面

**收支明细：**

- 明细列表：按时间倒序显示所有收支记录
- 记录类型：成功奖励、失败扣除、暂停扣费、充值到账、新手赠送等
- 金额显示：收入用绿色+号，支出用红色-号
- 时间戳：具体的操作时间
- 相关信息：关联的专注或活动信息

**赚币入口：**

- 挑战任务：完成挑战获得奖励
- 每日签到：连续签到获得奖励（如有）
- 推荐奖励：邀请好友获得奖励（如有）

#### 充值页面内容

**充值档位：**

- 多种充值选项：如 ¥6/100 币、¥18/300 币、¥30/500 币、¥68/1200 币
- 性价比标识：标注最优惠的档位
- 首充优惠：新用户首次充值优惠（如有）

**支付方式：**

- App Store 内购：使用 IAP 进行支付
- 支付确认：显示购买的币数和金额

#### 交互要求

- 展示余额、充值入口（IAP）、收支明细
- 新手赠币到账与提示
- 充值流程符合 App Store 规范

---

### 6. 🎯 挑战页面 (Challenges)

#### 核心功能

- 挑战大厅浏览
- 挑战领取
- 我的挑战管理
- 挑战记录查看

#### 页面内容

**页面内 Tab 导航：**

- 挑战大厅 Tab：浏览和领取新挑战
- 我的挑战 Tab：查看进行中和历史挑战

**挑战大厅 Tab：**

- 可领取挑战：显示平台发布的挑战任务
- 挑战卡片：包含挑战标题、描述、入场费用、奖励说明
- 难度标识：标注挑战的难度等级
- 时间限制：显示挑战的有效期
- 领取状态：显示是否已领取或已满额

**我的挑战 Tab：**

- 进行中挑战：当前正在进行的挑战列表
- 挑战历史：已完成/失败的挑战记录
- 筛选功能：按状态（进行中/成功/失败）筛选
- 统计信息：挑战成功率、总奖励等

**挑战详情页：**

- 挑战规则：详细说明挑战的完成条件
- 必屏蔽 App：显示挑战要求屏蔽的应用列表
- 目标条件：次数/时段/时长等具体要求
- 入场消耗：需要消耗的自律币数量
- 奖励形式：永久上限提升或临时能力加成

**进行中挑战状态：**

- 进度条：显示当前完成进度
- 剩余时间：挑战截止时间倒计时
- 当前状态：已完成的部分和待完成的部分
- 放弃挑战：提供放弃选项（扣除入场费）

**挑战记录详情：**

- 挑战信息：挑战名称、完成时间、结果
- 奖励记录：获得的奖励或扣除的费用
- 进度回顾：挑战过程中的关键节点
- 复盘建议：失败挑战的改进建议

**结算页面：**

- 结果展示：成功或失败的结果
- 奖励发放：成功时展示获得的奖励
- 失败分析：失败时给出原因与下次建议
- 再次挑战：失败后的重新挑战入口

#### 交互要求

- 领取时明确入场消耗与奖励形式
- 余额不足给出充值入口
- 进行中展示进度条与剩余时间
- 失败给出原因与下次建议
- 奖励为永久上限时，立即反映到上限与段位进度

---

### 7. ⚙️ 设置页面 (Settings)

> 从"我的"页面点击设置入口进入

#### 核心功能

- 权限管理
- 应用设置
- 帮助支持
- 账户管理

#### 页面内容

**权限设置：**

- 屏幕使用时间权限：状态显示和开启引导
- 通知权限：推送通知的开关设置
- 权限检测：实时检测权限状态并提示

**应用设置：**

- 通知设置：开始/结束通知的开关
- 暂停设置：暂停时长选项和次数限制
- 主题设置：深色/浅色模式切换（如有）

**帮助与支持：**

- 使用教程：应用使用指南
- 常见问题：FAQ 页面
- 意见反馈：用户反馈入口
- 联系我们：客服联系方式

**关于应用：**

- 版本信息：当前应用版本号
- 隐私政策：隐私条款链接
- 用户协议：服务条款链接
- 开源许可：第三方库许可信息

#### 交互要求

- 权限引导清晰有效
- 设置项状态实时更新
- 帮助文档易于理解

---

### 8. 👤 我的页面 (Profile/My)

#### 核心功能

- 个人信息展示
- 段位系统展示
- 自律币钱包入口
- 应用设置入口
- 专注统计与成就

#### 页面内容

**个人信息：**

- 用户头像：支持自定义头像
- 用户昵称：可编辑的用户名
- 注册时间：账户创建时间

**段位系统展示（类似支付宝会员等级）：**

- 段位徽章：当前星航段位名称与精美图标
- 能力上限：当前可选择的 App 数量和最长时长
- 进度条：距下一阶段的进度可视化展示
- 进度提示：距下一阶还差 X 分钟 / 成功率 Y%
- 段位特权：当前段位享有的专注能力
- 晋升历程：段位提升的时间线记录

**专注统计：**

- 今日专注：今天的专注时长和次数
- 本周统计：近 7 天的专注数据（M7、SR7）
- 历史总计：累计专注时长和次数
- 成功率：专注完成率统计
- 数据趋势：专注时长和成功率的变化趋势图

**成就系统：**

- 段位历程：段位提升的历史记录和时间
- 挑战成就：完成的挑战任务和获得的奖励
- 里程碑：重要的专注里程碑（如首次专注、连续专注等）
- 连续记录：连续专注天数、最长专注时长等

**功能入口：**

- 自律币钱包：点击进入钱包页面，显示余额概览
- 应用设置：点击进入设置页面
- 帮助与反馈：用户支持入口
- 关于我们：应用信息和版本

**账户管理：**

- 账户安全：密码修改、登录设备管理
- 数据同步：云端数据同步状态
- 账户注销：注销账户选项

#### 交互要求

- 段位展示参考支付宝会员等级的视觉设计，突出等级感和成就感
- 段位晋升时即时弹出晋升动画与奖励提示（如少量自律币）
- 统计数据准确展示，支持数据趋势可视化
- 成就系统激励用户，里程碑达成有庆祝动效
- 功能入口清晰，支持快速导航到钱包和设置页面
- 账户管理功能完整

---

## 🔄 核心流程设计

### 1. 一次性专注流程

选择目标 → 选择时长 → 选择下注 → 开始专注 → 首页倒计时 → 结束通知 → 结算页面

### 2. 周期计划流程

创建计划 → 设置时间段 → 到点自动开始 → 首页倒计时 → 到点自动结束 → 结束通知 → 自动结算

### 3. 暂停恢复流程

专注中 → 点击暂停 → 选择暂停时长 → 确认扣费 → 首页显示暂停 → 时间到自动恢复或手动恢复 → 继续专注

### 4. 拦截处理流程

打开被屏蔽 App → 展示拦截页 → 显示专注信息 → 引导返回或继续专注

---

## 💰 经济系统设计

### 自律币机制

- **获取方式**：注册赠送、完成专注、完成挑战、内购充值
- **消耗场景**：开始专注下注、暂停扣费、挑战入场费

### 打赌规则

- **下注要求**：开始一次性专注或周期计划时需下注自律币
- **成功奖励**：返还下注，并给予 50%时长的奖励
- **失败处理**：扣除下注并记录失败
- **暂停规则**：3 分钟内的暂停不判负，但需消耗 1 个自律币

### 充值系统

- **充值方式**：App 内购（IAP）
- **充值档位**：多种价格档位选择
- **合规要求**：符合 App Store 内购规范

---

## 🌟 段位系统设计

### 星航段位阶梯

- **L0「试飞员」**：3 Apps / 45 分钟（默认）
- **L1「观星者」**：M7≥120 且 SR7≥60% → 5 Apps / 60 分钟
- **L2「逐月者」**：M7≥240 且 SR7≥65% → 7 Apps / 75 分钟
- **L3「行星行者」**：M7≥420 且 SR7≥70% → 9 Apps / 105 分钟
- **L4「恒星领航」**：M7≥600 且 SR7≥75% → 12 Apps / 150 分钟
- **L5「星云指挥」**：M7≥900 且 SR7≥80% → 15 Apps / 180 分钟

### 解锁规则

- **M7**：近 7 天合格专注分钟数
- **SR7**：近 7 天专注成功率
- **永久解锁**：达成后不降级
- **升级冻结**：SR7 连续 14 天 <50% 时仅冻结升级

---

## 🎯 挑战系统设计

### 挑战机制

- **发布方式**：平台统一添加挑战任务，对所有用户可见
- **领取规则**：用户在挑战大厅中可以选择任务挑战，立即开始
- **数量限制**：平台每周发布 3-5 个挑战，用户可领取至多 2 个

### 挑战配置

- **必屏蔽 App**：指定需屏蔽 App 集合
- **目标条件**：次数/时段/时长等具体要求
- **入场消耗**：10/20/50 自律币
- **奖励类型**：永久 +1 App 或 +15 分；或 7 天临时 +2 Apps / +30 分

### 结算规则

- **成功奖励**：完成挑战后发放奖励
- **失败处理**：挑战失败，只损失消耗的自律币
- **进度返还**：可选开启"80% 进度返 50% 币"（默认关闭，A/B 评估）

---

## 📊 验收标准

### 功能验收

- 能完成一次性专注的完整链路：选择 → 开始 → 倒计时 → 结束通知
- 周期计划能按设定到点自动开始与结束（包含通知）
- 专注中可暂停并在时间到自动恢复
- 打开被拦截目标时出现拦截页，文案与结束时间展示正确
- App 重启后仍能正确展示当前专注状态

### 自律币系统验收

- 注册后赠币按设定值到账，并在钱包与明细可见
- 开始专注时若余额不足，无法下注并出现引导；余额充足可完成下注
- 成功结束：返还下注金额并按比例或固定值发放奖励，余额与明细一致
- 取消/违规：判负并扣除下注金额，失败记录可见
- 暂停（≤3 分钟）：不判负，但按设定扣除自律币；超过规则则按失败处理

### 段位系统验收

- 近 7 天统计（M7、SR7）正确计算；达阈值后自动提升上限并展示晋升
- 晋升后不降级，SR7 连续 14 天 <50% 时仅冻结升级

### 挑战系统验收

- 可领取、进行中、结算全链路可用，入场扣币与奖励发放准确
- 必须屏蔽 App 生效；永久/临时奖励对上限与展示即时生效

---

## 📝 文案规范

### 关键提示文案

- **开始专注**：标题"专注开始"，副文案"已为你屏蔽干扰应用"
- **结束专注**：标题"专注结束"，副文案"共坚持 X 分钟，已解除屏蔽"
- **拦截页面**：标题"已被屏蔽"，副文案"总时长 X 分钟，HH:mm 结束"
- **暂停提醒**：标题"已暂停"，副文案"将于 X 分钟后自动恢复"
- **权限缺失**：提示"请开启屏幕使用时间权限以开始专注"

### 打赌相关文案

- **下注成功**：标题"下注成功"，副文案"坚持到结束可返还 Y 并额外获得 +Z"
- **打赌失败**：标题"本次打赌失败"，副文案"已扣除 Y，自律下一次"
- **余额不足**：标题"余额不足"，副文案"去充值或做任务赚取自律币"
- **暂停扣费**：标题"已消耗 X 自律币"，副文案"3 分钟内不判负，注意时间"
- **新手赠币**：标题"赠送自律币已到账"，副文案"立即开一局试试吧"

### 段位相关文案

- **段位晋升**：标题"星航晋升至「{段位名}」"，副文案"上限提升至 {Apps}/{分钟}，继续加油！"
- **自动解锁进度**：标题"距下一阶还差 {X} 分钟"，副文案"近 7 天成功率 {Y}%"

### 挑战相关文案

- **挑战领取**：标题"挑战已领取"，副文案"完成即可获得 {奖励}"
- **挑战成功**：标题"挑战完成！"，副文案"奖励 {奖励} 已到账"
- **挑战失败**：标题"挑战未达标"，副文案"已扣除入场 {X} 币，复盘一下再来"

---

## 🎯 成功指标

### 核心指标

- **新手完成率**：首次进入 48 小时内成功开启一次专注的比例 ≥ 60%
- **专注完成率**：开始后坚持到结束的比例 ≥ 70%
- **周期计划使用率**：创建至少 1 条周期计划的用户占活跃用户 ≥ 25%
- **次日留存提升**：注册赠币与打赌机制带来的 D1 留存提升 ≥ +5pp（对照组）
- **变现基础**：充值转化率 ≥ 1%，ARPPU 与币收支比例监控（Source/Sink 比例 0.8~1.2）

---

## 🚀 开发里程碑

### M1：核心功能

- 一次性专注、周期计划、暂停/恢复、拦截页、通知与状态恢复
- 基础自律币钱包、注册赠币、下注/结算与明细

### M2：进阶功能

- 跨日体验优化、进度与结果展示优化、基础统计页（可选）
- 自动解锁与段位、挑战板块（平台派发）

### M3：商业化

- 会员/内购策略与文案、成长任务与运营活动（若进入 V1）

---

## ⚠️ 边界说明

### 产品边界

- **最小时长限制**：当选择极短时长时，前端仍以用户选择为主进行展示与提示
- **屏蔽边界**：系统限制导致的个别应用/域名不可屏蔽，需在文案说明
- **跨日说明**：夜间计划跨日的表现以"到点结束/次日再开始"为准（后续优化）

### 合规要求

- **非博彩说明**：结果完全由用户行为决定，无任何概率或随机因素，不可兑现法币；自律币仅限应用内使用
- **充值合规**：采用 App 内购（IAP）售卖自律币（消耗型），价格与换算在设置与充值页明确展示
- **防滥用**：每日暂停扣费次数与单次上限可配置；失败记录用于复盘，不鼓励过度开局

### 异常处理

- **离线/异常**：网络异常时结算以本地状态与系统时间为准，待恢复后与服务器对账；异常不重复扣费

---

## 📋 参数配置

### 默认参数

- **注册赠币数量**：100 自律币（可 A/B 测试）
- **下注档位**：5/10/20/50/自定义
- **最小下注规则**：基于时长的最小下注值，计算公式为 Math.floor((时长分钟数 - 1) / 30) + 1
  - 0-30 分钟：最小下注 1 个自律币
  - 31-60 分钟：最小下注 2 个自律币
  - 61-90 分钟：最小下注 3 个自律币
  - 91-120 分钟：最小下注 4 个自律币
  - 以此类推，每增加 30 分钟，最小下注增加 1 个自律币
- **暂停扣费**：每次 X 自律币；每日最多 Y 次（或按时长阶梯计费）
- **初始限制**：最多 3 个 App、最长 45 分钟

### 合格门槛

- **单次时长**：≥25 分钟
- **每日计入**：≤2 次，间隔 ≥120 分钟

### 奖励机制

- **固定奖励**：成功后固定奖励 Z 自律币
- **倍率奖励**：按下注金额与时长的倍率 r 计算（奖励 = min(上限, 下注 ×r× 时长系数)）

---

_本 PRD 面向产品与设计，未包含实现手段；如需落地支持，另行输出技术对齐文档（TDD）。_
